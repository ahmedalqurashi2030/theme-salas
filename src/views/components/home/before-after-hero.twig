{#
| Variable              | Type   | Description
|-----------------------|--------|----------------------------------------------
| component.title       | string | Section title
| component.subtitle    | string | Small badge/eyebrow text
| component.description | string | Rich text section description
| component.button_text | string | CTA text
| component.button_link | string | CTA URL
| component.before_image| string | Before image URL
| component.after_image | string | After image URL
| component.before_label| string | Before badge text
| component.after_label | string | After badge text
#}

{% set subtitle = component.subtitle ?? '' %}
{% set title = component.title ?? 'شاهدي النتيجة قبل وبعد' %}
{% set description = component.description ?? '' %}
{% set button_text = component.button_text ?? '' %}
{% set button_link = component.button_link ?? '#' %}

{% set before_image = component.before_image ?? component.after_image ?? '' %}
{% set after_image = component.after_image ?? component.before_image ?? '' %}
{% set layout_style_raw = component.layout_style[0] ?? component.layout_style ?? 'split' %}
{% set layout_style = layout_style_raw.label ?? layout_style_raw.key ?? layout_style_raw.value ?? layout_style_raw %}
{% set is_stacked_layout = layout_style in ['stacked', 'عمودي (المحتوى فوق الصورة)'] %}

{% set before_word = trans('components.comparison.before') %}
{% set after_word = trans('components.comparison.after') %}
{% set before_desc = component.before_label|default('')|trim %}
{% set after_desc = component.after_label|default('')|trim %}
{% set before_alt = before_desc ? before_word ~ ': ' ~ before_desc : before_word %}
{% set after_alt = after_desc ? after_word ~ ': ' ~ after_desc : after_word %}

<section class="s-block th-before-after-hero {{ is_stacked_layout ? 'th-before-after-hero--stacked' : 'th-before-after-hero--split' }}">
	<div class="container">
		<div class="th-before-after-hero__panel relative overflow-hidden rounded-[20px] p-[14px] md:p-6 lg:p-8">
			<div class="th-before-after-hero__inner relative grid items-center gap-6 {{ is_stacked_layout ? 'grid-cols-1' : 'lg:grid-cols-[minmax(250px,0.88fr)_minmax(0,1fr)] lg:gap-[30px]' }}">
				<div class="th-before-after-hero__content min-w-0 {{ is_stacked_layout ? 'text-center' : 'text-center lg:text-right ltr:lg:text-left' }}">
					{% if subtitle %}
						<span class="th-before-after-hero__eyebrow mb-3 inline-flex items-center gap-1.5 rounded-full px-3 py-1.5">{{ subtitle }}</span>
					{% endif %}

					{% if title %}
						<h2 class="th-before-after-hero__title mb-3">{{ title }}</h2>
					{% endif %}

					{% if description %}
						<div class="th-before-after-hero__desc mb-5 {{ is_stacked_layout ? 'mx-auto max-w-[62ch]' : 'mx-auto max-w-[62ch] lg:mx-0 lg:max-w-none' }}">
							{{ description|raw }}
						</div>
					{% endif %}


				</div>

				<div class="th-before-after-hero__visual min-w-0">
					<div class="th-before-after-hero__compare js-before-after-hero" data-initial-position="50" style="--th-before-after-pos: 50%;">
						<div class="th-before-after-hero__base">
							<img class="th-before-after-hero__img" src="{{ before_image }}" alt="{{ before_alt }}">
							{% if before_desc %}
								<span class="th-before-after-hero__caption th-before-after-hero__caption--before">{{ before_desc }}</span>
							{% endif %}
						</div>

						<div class="th-before-after-hero__overlay">
							<img class="th-before-after-hero__img" src="{{ after_image }}" alt="{{ after_alt }}">
							{% if after_desc %}
								<span class="th-before-after-hero__caption th-before-after-hero__caption--after">{{ after_desc }}</span>
							{% endif %}
						</div>

						<button type="button" class="th-before-after-hero__handle" aria-label="تحريك للمقارنة بين {{ before_word }} و {{ after_word }}" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="50">
							<span class="th-before-after-hero__handle-circle" aria-hidden="true">
								<i class="sicon-arrow-left th-before-after-hero__handle-arrow th-before-after-hero__handle-arrow--left"></i>
								<i class="sicon-arrow-right th-before-after-hero__handle-arrow th-before-after-hero__handle-arrow--right"></i>
							</span>
							<span class="sr-only">{{ before_word }}
								/
								{{ after_word }}</span>
						</button>

						<span class="th-before-after-hero__badge th-before-after-hero__badge--before">
							<span class="th-before-after-hero__badge-title">{{ before_word }}</span>
						</span>

						<span class="th-before-after-hero__badge th-before-after-hero__badge--after">
							<span class="th-before-after-hero__badge-title">{{ after_word }}</span>
						</span>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
