{# Get component data from theme.json #}
{% set section_title = component.section_title|default('تصفح حسب الفئة') %}
{% set section_subtitle = component.section_subtitle|default('') %}
{% set display_mode_raw = component.display_mode.selected[0].label|default(component.display_mode.selected[0].value|default('slider'))|lower %}
{% set display_mode = (display_mode_raw in ['list','قائمة']) ? 'list' : 'slider' %}
{% set autoplay = component.autoplay|default(false) %}
{% set show_controls = component.show_controls|default(true) %}
{% set two_rows = component.two_rows|default(false) %}
{% set items_mobile_raw = component.items_per_view_mobile.selected[0].value|default(component.items_per_view_mobile.selected[0].label|default(component.items_per_view_mobile.value|default(component.items_per_view_mobile|default('3')))) %}
{% set items_mobile = (items_mobile_raw in ['1','2','3','4']) ? items_mobile_raw : '3' %}
{% set items_desktop_raw = component.items_per_view_desktop.selected[0].value|default(component.items_per_view_desktop.selected[0].label|default(component.items_per_view_desktop.value|default(component.items_per_view_desktop|default('6')))) %}
{% set items_desktop = (items_desktop_raw in ['4','5','6','7','8']) ? items_desktop_raw : '6' %}
{% set items = component.items|default([]) %}

{# Generate unique ID for this section instance #}
{% set section_id = 'tharaa-circle-' ~ random() %}

{# Only render if we have items #}
{% if items is not empty %}


	<section class="s-block  tharaa-links-section style-circle {{ display_mode == 'list' ? 'mode-grid' : '' }} {{ two_rows ? 'mode-double' : '' }}" id="{{ section_id }}" data-autoplay="{{ autoplay ? 'true' : 'false' }}" data-items-mobile="{{ items_mobile }}" data-items-desktop="{{ items_desktop }}" style="--th-items-mobile: {{ items_mobile|default('3') }}; --th-items-desktop: {{ items_desktop|default('6') }}; --th-gap: 20px;">

		<div class="container">



			
        {# استدعاء الهيدر الموحد #}
        {% include 'views/components/home/_partials/section-header.twig' with {
            title: section_title,
            subtitle: section_subtitle,
        } %}


			<div class="tharaa-track-wrapper">

				{% if show_controls %}
					<button class="tharaa-nav-btn btn-prev" aria-label="{{ trans('common.previous') }}">
						<i class="sicon-chevron-{{ user.language.dir == 'rtl' ? 'right' : 'left' }}"></i>
					</button>

					<button class="tharaa-nav-btn btn-next" aria-label="{{ trans('common.next') }}">
						<i class="sicon-chevron-{{ user.language.dir == 'rtl' ? 'left' : 'right' }}"></i>
					</button>
				{% endif %}

				<div
					class="tharaa-track">

					{# Loop through items from theme.json: items[] #}
					{% for item in items %}
						<a
							href="{{ item.url|default('#') }}" class="tharaa-card" aria-label="{{ item.title }}">

							{# Visual Container (Image) - Circle shape via style-circle modifier #}
							<div class="tharaa-card__visual">
								<img class="tharaa-card__img" src="{{ item.image }}" alt="{{ item.title }}" loading="lazy" decoding="async">
							</div>

							{# Content Container (Title + Optional Count) #}
							<div class="tharaa-card__content">
								<span class="tharaa-card__title">{{ item.title }}</span>

								{# Optional: Product count (if available in data) #}
								{% if item.count is defined %}
									<span class="tharaa-card__count">{{ item.count }}</span>
								{% endif %}
							</div>
						</a>
					{% endfor %}

				</div>
			</div>

			<div class="tharaa-progress">
				<div class="tharaa-progress__bar"></div>
			</div>

		</div>
	</section>

{% endif %}
