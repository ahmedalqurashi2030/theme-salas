<section
	class="lifestyle-section" id="section-{{ section_id }}">
	<!-- Ø§Ù„Ø®Ù„ÙÙŠØ§Øª Ø§Ù„Ø¬Ù…Ø§Ù„ÙŠØ© -->
	<div class="halo halo-1"></div>
	<div class="halo halo-2"></div>

	<div
		class="section-container">
		<!-- Ø±Ø£Ø³ Ø§Ù„Ù‚Ø³Ù… ÙˆØ§Ù„ÙÙ„Ø§ØªØ± -->
		<div class="section-header">
			<div>
				<h2>{{ section_titile|default('Ù…Ù†ØªØ¬Ø§Øª Ù…Ø®ØªØ§Ø±Ø©') }}</h2>
				<p>ØªØµÙØ­ Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù„Ø¯ÙŠÙ†Ø§</p>
			</div>

			<!-- Ø§Ù„ÙÙ„Ø§ØªØ± (Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª) -->
			{% if component.products|length > 0 %}
				<div class="category-filter">
					<button class="active filter-btn" data-target="all">Ø§Ù„ÙƒÙ„</button>
					{% for tab in component.products %}
						{% if tab.category_list and tab.dropdown_list_1|length > 0 %}
							<button class="filter-btn" data-target="cat-{{ tab.category_list.id }}">
								{{ tab.category_list.categoty_title }}
							</button>
						{% endif %}
					{% endfor %}
				</div>
			{% endif %}
		</div>

		<!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
		<div class="products-band">
			<div class="cards-strip-wrapper">
				<div
					class="cards-strip">

					{# Ø­Ù„Ù‚Ø© ØªÙƒØ±Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª #}
					{% for tab in component.products %}
						{# Ø­Ù„Ù‚Ø© ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¯Ø§Ø®Ù„ ÙƒÙ„ ØªØ¨ÙˆÙŠØ¨ #}
						{% for product in tab.dropdown_list_1 %}

							<article class="product-card {{ product.is_out_of_stock ? 'is-out-of-stock' : '' }}" data-category="cat-{{ tab.category_list.id }}">

								<div
									class="img-wrapper">
									<!-- Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ (Ù…Ù†Ø·Ù‚ Ø³Ù„Ø© Ø§Ù„Ø±Ø³Ù…ÙŠ) -->
									{% if product.promotion_title %}
										<span class="badge-tag sale">{{ product.promotion_title }}</span>
									{% elseif product.is_out_of_stock %}
										<span class="badge-tag out">{{ trans('pages.products.out_of_stock') }}</span>
									{% elseif product.is_new %}
										<span class="badge-tag new">Ø¬Ø¯ÙŠØ¯</span>
									{% endif %}

									<!-- Ø§Ù„ØªÙ‚ÙŠÙŠÙ… -->
									{% if product.rating %}
										<div class="rating-pill">
											<span>â˜…</span>
											{{ product.rating.stars }}
										</div>
									{% endif %}

									<!-- Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø© (Ù…Ø¯Ù…Ø¬ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù…Ø®ØµØµ) -->
									<button class="btn-quick-view custom-qv-trigger" onclick="openCustomModal(this)" data-id="{{ product.id }}" data-img="{{ product.image.url }}" data-title="{{ product.name }}" data-price="{{ product.price|money }}" data-old-price="{{ product.is_on_sale ? product.regular_price|money : '' }}" data-cat="{{ tab.category_list.name }}" data-desc="{{ product.short_description|striptags }}" data-url="{{ product.url }}">
										ğŸ‘ï¸
									</button>

									<!-- Ø§Ù„ØµÙˆØ±Ø© (Lazy Load Ù…Ø«Ù„ Ø³Ù„Ø©) -->
									<a href="{{ product.url }}">
										<img class="lazy-load" src="{{ 'images/s-empty.png'|asset }}" data-src="{{ product.image }}" alt="{{ product.image.alt }}">
									</a>
								</div>

								<span class="cat-name">{{ tab.category_list.name }}</span>
								<h3 class="prod-title">
									<a href="{{ product.url }}">{{ product.name }}</a>
								</h3>

								<!-- Ø§Ù„Ø£Ø³Ø¹Ø§Ø± (Ù…Ù†Ø·Ù‚ Ø³Ù„Ø© Ø§Ù„Ø±Ø³Ù…ÙŠ) -->
								<div class="price-row">
									{% if product.is_on_sale %}
										<span class="curr-price">{{ product.sale_price|money }}</span>
										<span class="old-price">{{ product.regular_price|money }}</span>
									{% elseif product.starting_price %}
										<span class="starting-label">{{ trans('pages.products.starting_price') }}</span>
										<span class="curr-price">{{ product.starting_price|money }}</span>
									{% else %}
										<span class="curr-price">{{ product.price|money }}</span>
									{% endif %}
								</div>

								<div class="card-actions">
									<button class="btn-card-add" onclick="salla.cart.addItem({ id: {{ product.id }}, quantity: 1 })">
										<span>+</span>
										Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
									</button>
									<!-- Ø²Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø§Ù„Ø±Ø³Ù…ÙŠ Ù„Ø³Ù„Ø© -->
									<salla-button-wishlist class="btn-card-fav-wrapper" object-id="{{ product.id }}"></salla-button-wishlist>
								</div>
							</article>

						{% endfor %}
					{% endfor %}

				</div>
			</div>
			<!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
			<div class="scroll-bar">
				<div class="scroll-prog"></div>
			</div>
		</div>
	</div>
</section>

<!-- Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ù…Ø®ØµØµ -->
<div class="modal-wrap" id="customSallaModal">
	<div class="modal-box">
		<button class="modal-close" onclick="closeCustomModal()">âœ•</button>
		<div class="modal-img-col"><img id="mImg" src="" alt=""></div>
		<div class="modal-info-col">
			<div class="m-header">
				<div class="m-cat" id="mCat"></div>
				<h2 class="m-title" id="mTitle"></h2>
				<div class="m-price">
					<span id="mPrice"></span>
					<span id="mOldPrice" class="m-old-price"></span>
				</div>
			</div>
			<p class="m-desc" id="mDesc"></p>

			<div class="qty-wrap">
				<span class="qty-label">Ø§Ù„ÙƒÙ…ÙŠØ©:</span>
				<div class="qty-input-group">
					<button class="qty-btn" onclick="updateMQty(-1)">-</button>
					<input type="number" id="mQty" class="qty-field" value="1" readonly>
					<button class="qty-btn" onclick="updateMQty(1)">+</button>
				</div>
			</div>

			<div class="m-actions">
				<button class="m-btn btn-outline" id="mAddToCartBtn">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
				<a href="#" id="mProductLink" class="m-btn btn-solid">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</a>
			</div>
		</div>
	</div>
</div>

<style>
/* --- 1. Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø­Ø§ÙŠØ¯Ø© Ø§Ù„Ø£Ù†ÙŠÙ‚Ø© --- */:root
{
	--page-bg: #f9f9fa;
	--text-main: #333333;
	--text-muted: #777777;
	--accent-main: #b08d93;
	--accent-strong: #8a656c;
	--accent-soft: #e8dadd;
	--card-bg: #ffffff;
	--band-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.6) 0%, rgba(245, 240, 242, 0.5) 100%);
	--gap-size: 14px;
	--radius-xl: 18px;
	--radius-pill: 999px;
	--shadow-soft: 0 8px 30px rgba(0, 0, 0, 0.04);
	--transition-main: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.lifestyle-section {
	padding: 40px 15px;
	position: relative;
	overflow: hidden;
	margin-bottom: 30px;
	direction: rtl;
}

.lifestyle-section * {
	box-sizing: border-box;
	outline: none;
}

/* Ø§Ù„Ø®Ù„ÙÙŠØ§Øª */
.lifestyle-section .halo {
	position: absolute;
	border-radius: 999px; filter: blur(60px);
	opacity: 0.5;
	pointer-events: none;
	z-index: 0;
}
.lifestyle-section .halo-1 {
	width: 350px;
	height: 350px;
	background: radial-gradient(circle, #eddcd9 0%, transparent 70%);
	top: -5%;
	right: -5%;
}
.lifestyle-section .halo-2 {
	width: 300px;
	height: 300px;
	background: radial-gradient(circle, #e0e6ed 0%, transparent 70%);
	bottom: -5%;
	left: -5%;
}

.section-container {
	width: 100%;
	max-width: 1280px;
	margin: 0 auto;
	position: relative;
	z-index: 1;
}

/* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„ÙÙ„Ø§ØªØ± */
.section-header {
	display: flex;
	align-items: flex-end;
	justify-content: space-between;
	flex-wrap: wrap;
	gap: 20px;
	margin-bottom: 25px;
}
.section-header h2 {
	margin: 0 0 5px;
	font-size: 26px;
	color: var(--text-main);
}
.section-header p {
	margin: 0;
	color: var(--text-muted);
	font-size: 14px;
}

.category-filter {
	background: #fff;
	padding: 5px;
	border-radius: var(--radius-pill);
	display: flex;
	gap: 5px;
	flex-wrap: wrap;
	box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
	border: 1px solid #eee;
}
.filter-btn {
	border: none;
	background: transparent;
	padding: 7px 20px;
	border-radius: var(--radius-pill);
	cursor: pointer;
	color: var(--text-muted);
	transition: 0.3s;
	font-size: 13px;
	font-family: inherit;
	font-weight: 500;
}
.filter-btn.active {
	background: var(--text-main);
	color: #fff;
}

/* Ø§Ù„Ø´Ø±ÙŠØ· ÙˆØ§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
.products-band {
	background: var(--band-gradient);
	border-radius: 30px;
	padding: 25px;
	border: 1px solid rgba(255, 255, 255, 0.8);
	box-shadow: 0 15px 40px rgba(0, 0, 0, 0.03);
	position: relative;
}

.cards-strip-wrapper {
	overflow-x: auto;
	padding-bottom: 15px;
	cursor: grab;
	scrollbar-width: none;
	-webkit-overflow-scrolling: touch;
}
.cards-strip-wrapper::-webkit-scrollbar {
	display: none;
}
.cards-strip {
	display: flex;
	gap: var(--gap-size);
}

/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Ù…Ø­Ø³Ù†Ø©) */
/* --- Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© --- */
.product-card {
	background: var(--card-bg);
	border-radius: var(--radius-xl);
	padding: 12px;
	position: relative;
	display: flex;
	flex-direction: column;
	transition: var(--transition-main);
	box-shadow: var(--shadow-soft);
	user-select: none;
	border: 1px solid transparent;

	/* Ù‡Ø°Ø§ Ø§Ù„Ø³Ø·Ø± Ù‡Ùˆ Ø§Ù„Ø£Ù‡Ù… Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø§Ù†ÙƒÙ…Ø§Ø´ */
	flex-shrink: 0;

	/* Ø§Ù„Ø¹Ø±Ø¶ Ù„Ù„Ø¬ÙˆØ§Ù„: Ø¨Ø·Ø§Ù‚ØªÙŠÙ† ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ Ù…Ø¹ Ù…Ø±Ø§Ø¹Ø§Ø© Ø§Ù„ÙØ±Ø§ØºØ§Øª */
	width: calc((100% - var(--gap-size)) / 2);
	min-width: 160px; /* Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØµØºØ± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ÙƒØ«ÙŠØ±Ø§Ù‹ */
	max-width: 220px; /* Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ÙƒØ¨Ø±Ù‡Ø§ ÙƒØ«ÙŠØ±Ø§Ù‹ ÙÙŠ Ø§Ù„Ø¬ÙˆØ§Ù„ */
}

/* Ø§Ù„Ø¹Ø±Ø¶ Ù„Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±: 5 Ø¨Ø·Ø§Ù‚Ø§Øª */
@media(min-width: 1024px) {
	.product-card {
		width: calc((100% -(var(--gap-size) * 4)) / 5);
		min-width: 200px;
		max-width: none;
	}
}

.product-card:hover {
	transform: translateY(-5px);
	border-color: var(--accent-soft);
	box-shadow: 0 15px 30px rgba(0, 0, 0, 0.06);
}

/* ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù†Ø§ÙØ°Ø© */
.product-card.is-out-of-stock {
	opacity: 0.8;
}
.product-card.is-out-of-stock .img-wrapper img {
	filter: grayscale(100%);
}

.img-wrapper {
	width: 100%;
	aspect-ratio: 1 / 1.05;
	border-radius: 12px;
	overflow: hidden;
	position: relative;
	margin-bottom: 12px;
	background-color: #f7f7f7;
}
.img-wrapper img {
	width: 100%;
	height: 100%;
	object-fit: cover;
	transition: 0.6s ease;
	mix-blend-mode: multiply;
}
.product-card:hover .img-wrapper img {
	transform: scale(1.06);
}

/* Ø§Ù„Ø´Ø§Ø±Ø§Øª */
.badge-tag {
	position: absolute;
	top: 10px;
	right: 10px;
	z-index: 5;
	color: #fff;
	padding: 4px 8px;
	border-radius: 4px;
	font-size: 10px;
	font-weight: bold;
}
.badge-tag.sale {
	background: #c0392b;
}
.badge-tag.new {
	background: #27ae60;
}
.badge-tag.out {
	background: #7f8c8d;
}

.rating-pill {
	position: absolute;
	bottom: 8px;
	left: 8px;
	z-index: 2;
	background: rgba(255, 255, 255, 0.95);
	padding: 3px 8px;
	border-radius: 4px;
	font-size: 10px;
	font-weight: 700;
	display: flex;
	gap: 3px;
	align-items: center;
	color: var(--text-main);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.btn-quick-view {
	position: absolute;
	top: 10px;
	left: 10px;
	width: 30px;
	height: 30px;
	z-index: 3;
	background: #fff;
	border-radius: 50%;
	border: 1px solid #eee;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 15px;
	color: var(--text-main);
	opacity: 0;
	transform: translateY(-5px);
	transition: 0.3s;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}
.product-card:hover .btn-quick-view {
	opacity: 1;
	transform: translateY(0);
}
@media(max-width: 768px) {
	.btn-quick-view {
		opacity: 1;
		transform: translateY(0);
	}
}

.cat-name {
	font-size: 10px;
	text-transform: uppercase;
	color: var(--text-muted);
	margin-bottom: 4px;
}
.prod-title {
	font-size: 13px;
	font-weight: 700;
	margin: 0 0 5px;
	line-height: 1.4;
	color: var(--text-main);
	height: 36px;
	overflow: hidden;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
}
.prod-title a {
	color: inherit;
	text-decoration: none;
}

.price-row {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-top: auto;
	margin-bottom: 12px;
}
.curr-price {
	font-size: 15px;
	font-weight: 800;
	color: var(--text-main);
}
.old-price {
	font-size: 11px;
	text-decoration: line-through;
	color: #aaa;
}
.starting-label {
	font-size: 11px;
	color: var(--text-muted);
}

.card-actions {
	display: flex;
	align-items: center;
	gap: 6px;
}
.btn-card-add {
	flex: 1;
	border: none;
	padding: 10px;
	border-radius: 8px;
	background: var(--text-main);
	color: white;
	font-size: 12px;
	font-weight: 600;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 5px;
	transition: 0.2s;
}
.btn-card-add:hover {
	background: var(--accent-strong);
}

.btn-card-fav-wrapper {
	width: 36px;
	height: 36px;
	display: inline-block;
}
/* ØªÙ†Ø³ÙŠÙ‚ Ø²Ø± Ø§Ù„Ù…ÙØ¶Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø³Ù„Ø© */
.btn-card-fav-wrapper button {
	width: 100% !important;
	height: 100% !important;
	border-radius: 8px !important;
	border: 1px solid #eee !important;
	background: #fff !important;
	color: #ccc !important;
	display: flex !important;
	align-items: center !important;
	justify-content: center !important;
	cursor: pointer;
	transition: 0.2s;
	padding: 0 !important;
}

.scroll-bar {
	width: 100px;
	height: 4px;
	background: #e0e0e0;
	border-radius: 10px;
	margin: 25px auto 0;
	overflow: hidden;
}
.scroll-prog {
	height: 100%;
	background: var(--text-main);
	width: 0;
	border-radius: 10px;
	transition: width 0.1s;
}

/* Modal Styles */
.modal-wrap {
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(5px);
	z-index: 9999;
	opacity: 0;
	pointer-events: none;
	transition: 0.3s;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 20px;
}
.modal-wrap.active {
	opacity: 1;
	pointer-events: auto;
}
.modal-box {
	background: #fff;
	width: 100%;
	max-width: 850px;
	border-radius: 16px;
	display: flex;
	overflow: hidden;
	transform: translateY(20px);
	opacity: 0;
	transition: all 0.4s ease;
	position: relative;
	max-height: 90vh;
}
.modal-wrap.active .modal-box {
	transform: translateY(0);
	opacity: 1;
}
.modal-close {
	position: absolute;
	top: 15px;
	left: 15px;
	width: 32px;
	height: 32px;
	background: #f0f0f0;
	border: none;
	border-radius: 50%;
	font-size: 20px;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 10;
	color: #333;
}
.modal-img-col {
	width: 45%;
	background: #fafafa;
	display: flex;
	align-items: center;
	justify-content: center;
	padding: 40px;
}
.modal-img-col img {
	max-width: 100%;
	max-height: 100%;
	object-fit: contain;
}
.modal-info-col {
	width: 55%;
	padding: 40px;
	display: flex;
	flex-direction: column;
	overflow-y: auto;
}
.m-title {
	font-size: 22px;
	font-weight: 800;
	color: var(--text-main);
	margin: 5px 0 10px;
}
.m-price {
	font-size: 24px;
	font-weight: 800;
	display: flex;
	gap: 10px;
}
.qty-input-group {
	display: inline-flex;
	align-items: center;
	background: #fff;
	border-radius: 8px;
	border: 1px solid #ddd;
}
.qty-btn {
	width: 36px;
	height: 36px;
	background: transparent;
	border: none;
	cursor: pointer;
}
.qty-field {
	width: 40px;
	text-align: center;
	border: none;
	background: transparent;
	font-weight: bold;
}
.m-actions {
	display: flex;
	gap: 10px;
	margin-top: auto;
}
.m-btn {
	flex: 1;
	padding: 14px;
	border-radius: 8px;
	font-size: 13px;
	font-weight: 700;
	cursor: pointer;
	text-align: center;
	text-decoration: none;
	display: flex;
	align-items: center;
	justify-content: center;
}
.btn-solid {
	background: var(--text-main);
	color: #fff;
}

@media(max-width: 768px) {
	.modal-box {
		flex-direction: column;
	}
	.modal-img-col {
		width: 100%;
		height: 220px;
		padding: 20px;
	}
	.modal-info-col {
		width: 100%;
		padding: 20px;
	}
	.m-actions {
		position: sticky;
		bottom: 0;
		background: #fff;
		padding-top: 10px;
		z-index: 5;
	}
}</style><script>
document.addEventListener("DOMContentLoaded", function () { // 1. Scroll Logic
const wrapper = document.querySelector('.cards-strip-wrapper');
const prog = document.querySelector('.scroll-prog');

if (wrapper) {
wrapper.addEventListener('scroll', () => {
const max = wrapper.scrollWidth - wrapper.clientWidth;
prog.style.width = max > 0 ? `${
(Math.abs(wrapper.scrollLeft) / max) * 100
}%` : '0%';
});

// Drag Functionality
let isDown = false,
startX,
scrollLeft;
wrapper.addEventListener('mousedown', (e) => {
isDown = true;
startX = e.pageX - wrapper.offsetLeft;
scrollLeft = wrapper.scrollLeft;
wrapper.style.cursor = 'grabbing';
});
wrapper.addEventListener('mouseleave', () => {
isDown = false;
wrapper.style.cursor = 'grab';
});
wrapper.addEventListener('mouseup', () => {
isDown = false;
wrapper.style.cursor = 'grab';
});
wrapper.addEventListener('mousemove', (e) => {
if (! isDown) 
return;



e.preventDefault();
const x = e.pageX - wrapper.offsetLeft;
wrapper.scrollLeft = scrollLeft - (x - startX) * 2;
});
}

// 2. Tabs Logic
const filters = document.querySelectorAll('.filter-btn');
const cards = document.querySelectorAll('.product-card');

filters.forEach(btn => {
btn.addEventListener('click', () => {
filters.forEach(b => b.classList.remove('active'));
btn.classList.add('active');
const target = btn.dataset.target;
cards.forEach(card => {
if (target === 'all' || card.dataset.category === target) {
card.style.display = 'flex';
} else {
card.style.display = 'none';
}
});
if (wrapper) 
wrapper.scrollLeft = 0;



});
});
});

// 3. Modal Functions
const modal = document.getElementById('customSallaModal');
const mQty = document.getElementById('mQty');
let currentProductId = null;

window.openCustomModal = (btn) => { // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø²Ø± Ù…Ø¨Ø§Ø´Ø±Ø© (Ø£ÙØ¶Ù„ ÙˆØ£Ø³Ø±Ø¹)
const data = btn.dataset;

document.getElementById('mImg').src = data.img;
document.getElementById('mTitle').innerText = data.title;
document.getElementById('mPrice').innerText = data.price;
document.getElementById('mOldPrice').innerText = data.oldPrice || '';
document.getElementById('mCat').innerText = data.cat;
document.getElementById('mDesc').innerText = data.desc;
document.getElementById('mProductLink').href = data.url;

currentProductId = data.id;
mQty.value = 1;

modal.classList.add('active');
document.body.classList.add('modal-open');

const addBtn = document.getElementById('mAddToCartBtn');
addBtn.onclick = function () {
addBtn.innerText = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©...';
salla.cart.addItem({
id: currentProductId,
quantity: parseInt(mQty.value)
}).then(() => {
addBtn.innerText = 'ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© âœ“';
setTimeout(() => {
closeCustomModal();
addBtn.innerText = 'Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©';
}, 1000);
}).catch(() => {
addBtn.innerText = 'Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©';
});
};
};

window.closeCustomModal = () => {
modal.classList.remove('active');
document.body.classList.remove('modal-open');
};

window.updateMQty = (n) => {
let v = parseInt(mQty.value) + n;
mQty.value = v < 1 ? 1 : v;
};

if (modal) {
modal.addEventListener('click', (e) => {
if (e.target === modal) 
closeCustomModal();



});
}</script>
