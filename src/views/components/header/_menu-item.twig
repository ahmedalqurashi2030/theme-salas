{# src/views/components/header/_menu-item.twig #}

{% if is_mobile %}
    {# --- تصميم الموبايل (Accordion) --- #}
    <div>
        {% if not menu.has_children %}
            <a href="{{ menu.url }}" class="block p-4 border-b border-gray-50 font-bold text-gray-800">{{ menu.title }}</a>
        {% else %}
            <div class="th-acc-header" onclick="toggleAcc(this)">
                <a href="{{ menu.url }}" onclick="event.stopPropagation()" class="font-bold text-gray-800">{{ menu.title }}</a>
                <i class="sicon-add text-xs"></i>
            </div>
            <div class="th-acc-content">
                {% for child in menu.children %}
                    <a href="{{ child.url }}" class="block p-3 pr-8 text-sm text-gray-600 border-b border-gray-50 flex items-center gap-2">
                        {# إذا أردت إضافة أيقونات هنا #}
                        {{ child.title }}
                    </a>
                {% endfor %}
            </div>
        {% endif %}
    </div>

{% else %}
    {# --- تصميم الكمبيوتر (Cascading Dropdown) --- #}
    <li class="th-nav-item th-cascading-item {{ is_root ? '' : 'w-full' }}">
        
        <a href="{{ menu.url }}" class="{{ is_root ? '' : 'th-cascading-link' }}">
            {% if not is_root %}
                <div class="link-content">
                    {# أيقونة افتراضية أو صورة #}
                    <i class="sicon-layout-grid text-gray-300 text-lg"></i>
                    <span>{{ menu.title }}</span>
                </div>
            {% else %}
                {{ menu.title }}
            {% endif %}

            {% if menu.has_children %}
                <i class="{{ is_root ? 'sicon-keyboard_arrow_down mt-1 text-[10px]' : 'sicon-keyboard_arrow_left text-[10px]' }}"></i>
            {% endif %}
        </a>

        {% if menu.has_children %}
            {# القائمة المنسدلة #}
            <div class="{{ is_root ? 'th-cascading-dropdown' : 'th-nested-menu' }}">
                <ul class="flex flex-col">
                    {% for child in menu.children %}
                        {% include 'components.header._menu-item' with { menu: child, is_root: false, is_mobile: false } %}
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    </li>
{% endif %}