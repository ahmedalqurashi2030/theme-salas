{# src/views/components/layout/category-sidebar.twig #}

<!-- خلفية معتمة -->
<div class="th-cat-sidebar-overlay" onclick="tharaa.toggleCategorySidebar()"></div>

<!-- القائمة الجانبية -->
<aside class="th-cat-sidebar" id="th-category-sidebar">
    
    {# رأس القائمة #}
    <div class="th-cat-sidebar__header">
        <h3 class="font-bold text-lg">{{ trans('blocks.header.categories') }}</h3>
        <button class="th-btn-close" onclick="tharaa.toggleCategorySidebar()">
            <i class="sicon-cancel text-xl text-gray-500 hover:text-red-500"></i>
        </button>
    </div>

    {# جسم القائمة #}
    <div class="th-cat-sidebar__body">
        <ul class="th-cat-list">
            
            {# التكرار عبر روابط "القائمة الرئيسية" في سلة #}
            {# store.menus.main.links هو الرابط بالقائمة التي في الصورة #}
            
            {% for link in store.menus.main.links %}
                <li class="th-cat-item">
                    <div class="th-cat-item__row">
                        <a href="{{ link.url }}" class="th-cat-link">
                            {# يمكنك وضع أيقونة عامة هنا إذا أردت #}
                            <span>{{ link.title }}</span>
                        </a>
                        
                        {# إذا كان العنصر يحتوي على فروع (Sub Categories) #}
                        {% if link.children|length > 0 %}
                            <button class="th-toggle-sub" onclick="tharaa.toggleSubMenu(this)">
                                <i class="sicon-keyboard-arrow-left"></i>
                            </button>
                        {% endif %}
                    </div>

                    {# عرض القائمة الفرعية #}
                    {% if link.children|length > 0 %}
                        <ul class="th-cat-submenu" style="display: none;">
                            {% for sub in link.children %}
                                <li>
                                    <a href="{{ sub.url }}">
                                        <i class="sicon-minus text-[10px] text-gray-300"></i> 
                                        {{ sub.title }}
                                    </a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
</aside>