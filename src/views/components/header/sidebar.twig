{# src/views/components/layout/category-sidebar.twig #}

<!-- خلفية معتمة -->
<div class="th-cat-sidebar-overlay" onclick="tharaa.toggleCategorySidebar()"></div>

<!-- القائمة الجانبية -->
<aside class="th-cat-sidebar" id="th-category-sidebar">
    
    {# رأس القائمة #}
    <div class="th-cat-sidebar__header">
        <h3 class="font-bold text-lg">{{ trans('blocks.header.categories') }} الاقسام</h3>
        <button class="th-btn-close" onclick="tharaa.toggleCategorySidebar()">
            <i class="sicon-cancel text-xl text-gray-500 hover:text-red-500"></i>
        </button>
    </div>

    {# جسم القائمة #}
    <div class="th-cat-sidebar__body">
        <ul class="th-cat-list">
            
            {# التكرار عبر روابط "القائمة الرئيسية" في سلة #}
            {# store.menus.main.links هو الرابط بالقائمة التي في الصورة #}
            
           {% for item in store.menus.main.links %}
    <li>
        <a href="{{ item.url }}">
            
            {# 1. التحقق هل يوجد صورة مرفوعة؟ #}
            {% if item.image %}
                <!-- عرض الصورة كـ img -->
                <img src="{{ item.image }}" alt="{{ item.title }}" class="th-menu-img">
            
            {# 2. إذا لم توجد صورة، هل توجد أيقونة نصية؟ #}
            {% elseif item.icon %}
                <!-- عرض كلاس الأيقونة -->
                <i class="{{ item.icon }}"></i>
            
            {# 3. الحل البديل (Fallback) - مهم جداً للتصميم #}
            {% else %}
                 <!-- أيقونة افتراضية في حال لم يرفع التاجر شيئاً -->
                <i class="sicon-star"></i>
            {% endif %}

            <span>{{ item.title }}</span>
        </a>
    </li>
{% endfor %}
        </ul>
    </div>
</aside>

<script>
    console.log({{ store.menus.main.links | json_encode | raw }});
</script>