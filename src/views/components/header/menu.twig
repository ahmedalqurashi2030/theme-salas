{#
| Variable             | Type                   | Description                                        |
|----------------------|------------------------|----------------------------------------------------| 
| menus                | Menu[] *Collection     | List of menus                                      |
| menus[].has_children | Bool                   |                                                    |
| menus[].url          | string                 |                                                    |
| menus[].title        | string                 |                                                    |
| menus[].attrs        | string                 | Menu dom attributes ex: ` id="offers"`             |
| menus[].link_attrs   | string                 | Menu link dom attributes ex: `class="offers-link"` |
| menus[].children     | Menu[] *Collection     |                                                    |
| menus[].products     | ?Product[] *Collection | List of selected products or null                  |
#}

<div class="flex items-center h-full gap-8">
	{# Mega Menu #}
	<div class="th-all-cats-wrapper group" data-th-mega>
		<button type="button" class="th-all-cats-btn" aria-expanded="false" aria-controls="th-mega-menu-panel">
			<i class="sicon-layout-grid text-lg" style="background-color: rgba(39, 97, 231, 1);
			width: 36px;
			height: 36px;
			border-radius: 50%;
			color: #333;
			display: flex;
			align-items: center;
			justify-content: center;"></i>
			<span>{{ trans('blocks.header.all_categories') }}</span>
			<i class="sicon-keyboard_arrow_down text-xs opacity-50 mt-1 mr-auto"></i>
		</button>

		<div id="th-mega-menu-panel" class="th-mega-menu">
			<div class="th-mega-sidebar">
				{% for menu in menus %}
					{% if menu.has_children %}
						<button type="button"
								class="th-mega-tab {{ loop.first ? 'active' : '' }}"
								data-mega-tab="mega-{{ loop.index }}"
								aria-controls="mega-{{ loop.index }}"
								aria-selected="{{ loop.first ? 'true' : 'false' }}">
							<div class="flex items-center gap-2">
								{% if menu.image %}
									<img src="{{ menu.image }}" alt="{{ menu.title }}" class="w-6 h-6 rounded-full object-cover bg-gray-50">
								{% else %}
									<i class="sicon-layout-grid text-gray-400"></i>
								{% endif %}
								<span>{{ menu.title }}</span>
							</div>
							<i class="sicon-keyboard_arrow_left text-xs opacity-50"></i>
						</button>
					{% else %}
						<a href="{{ menu.url }}" class="th-mega-tab block hover:bg-white hover:text-gold transition" {{ menu.link_attrs|raw }}>
							<div class="flex items-center gap-2">
								{% if menu.image %}
									<img src="{{ menu.image }}" alt="{{ menu.title }}" class="w-6 h-6 rounded-full object-cover bg-gray-50">
								{% else %}
									<i class="sicon-layout-grid text-gray-400"></i>
								{% endif %}
								<span>{{ menu.title }}</span>
							</div>
						</a>
					{% endif %}
				{% endfor %}
			</div>

			<div class="th-mega-content overflow-y-auto">
				{% for menu in menus %}
					{% if menu.has_children %}
						<div id="mega-{{ loop.index }}" class="th-mega-pane {{ loop.first ? 'active' : '' }}">
							<div class="grid grid-cols-3 gap-8">
								{% for child in menu.children %}
									<div>
										<a href="{{ child.url }}" class="font-bold text-gray-800 mb-3 block hover:text-gold transition flex items-center gap-2">
											{% if child.image %}
												<img src="{{ child.image }}" alt="{{ child.title }}" class="w-8 h-8 rounded-full object-cover bg-gray-50">
											{% else %}
												<span class="w-8 h-8 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 text-xs">
													<i class="sicon-layout-grid"></i>
												</span>
											{% endif %}
											{{ child.title }}
										</a>
										{% if child.children|length > 0 %}
											<ul class="space-y-2 pr-10 border-r border-gray-50">
												{% for sub in child.children %}
													<li>
														<a href="{{ sub.url }}" class="text-sm text-gray-500 hover:text-gold transition block hover:translate-x-[-3px]">{{ sub.title }}</a>
													</li>
												{% endfor %}
											</ul>
										{% endif %}
									</div>
								{% endfor %}
							</div>
						</div>
					{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>

	{# Cascading Menu #}
	<ul class="th-nav-list flex items-center gap-6 h-full">
		{% for menu in menus %}
			{% include 'components.header._menu-item' with { is_root: true } %}
		{% endfor %}
	</ul>
</div>
