<header id="mainnav" class="store-header th-header">
	<div class="inner">
		{# 1. الشريط العلوي #}
		<div class="th-topbar hidden md:block">
			<div class="container flex justify-between items-center">
				<div class="flex items-center gap-4">
					{% component 'footer.menu' with {is_header:true} %}

					{% if store.settings.is_multilingual or store.settings.currencies_enabled %}
						<button type="button" onclick="salla.event.dispatch('localization::open')" class="th-topbtn text-xs">
							<span class="flag iti__flag iti__{{ user.language.country_code }}"></span>
							<span>{{ currency.symbol }}</span>
						</button>
					{% endif %}
				</div>
				<div class="text-xs opacity-90 font-medium">
					<i class="sicon-shipping-fast mx-1"></i>
					{{ trans('blocks.header.free_shipping') }}
				</div>
			</div>
		</div>

		{# 2. الهيدر الرئيسي #}
		<div class="th-main-header py-3">
			<div class="container flex items-center justify-between gap-6">
				<a href="#mobile-menu" class="hamburger-btn lg:hidden text-2xl text-gray-800 w-11 h-11 flex items-center justify-center hover:text-primary transition-colors" aria-label="{{ trans('blocks.header.menu') }}">
					<i class="sicon-menu"></i>
				</a>

				<a href="{{ store.url }}" class="store-logo shrink-0" aria-label="{{ store.name }}">
					<img src="{{ store.logo }}" alt="{{ store.name }}" class="h-10 md:h-12 w-auto object-contain">
				</a>

				<div class="header-search flex-1 hidden lg:block">
					<salla-search inline placeholder="{{ trans('blocks.header.search_placeholder') }}"></salla-search>
				</div>

				<div class="header-actions flex items-center gap-6">
					<button class="lg:hidden text-xl" onclick="salla.event.dispatch('search::open')" aria-label="{{ trans('blocks.header.search') }}">
						<i class="sicon-search"></i>
					</button>

					<div class="hidden lg:block">
						<salla-user-menu avatar-only show-header></salla-user-menu>
					</div>
					<button class="lg:hidden text-xl" onclick="salla.event.dispatch('login::open')" aria-label="{{ trans('common.elements.login') }}">
						<i class="sicon-user"></i>
					</button>

					{% if user.type=='user' %}
						<a href="{{ link('wishlist') }}" class="th-icon-btn hidden lg:flex" aria-label="{{ trans('blocks.header.wishlist') }}">
							<i class="sicon-heart"></i>
							<span class="th-icon-label">{{ trans('blocks.header.wishlist') }}</span>
						</a>
					{% endif %}

					<salla-cart-summary class="th-icon-btn" aria-label="{{ trans('blocks.header.cart') }}">
						<div slot="icon" class="relative">
							<i class="sicon-shopping-bag"></i>
						</div>
						<span class="th-icon-label hidden lg:block">{{ trans('blocks.header.cart') }}</span>
					</salla-cart-summary>
				</div>
			</div>
		</div>

		{# 3. الناف بار - Desktop Only #}
		<div class="th-navbar hidden lg:block">
			<div class="container h-full">
				{% include 'components.header.menu' %}
			</div>
		</div>
	</div>
</header>

{# Mobile Menu for mmenu-light in app.js #}
<nav id="mobile-menu" class="mobile-menu">
	<ul class="main-menu">
		{% for menu in menus %}
			<li class="text-sm font-bold">
				{% if not menu.has_children %}
					<a href="{{ menu.url }}" class="text-gray-500 block py-2" {{ menu.link_attrs|raw }}>{{ menu.title }}</a>
				{% else %}
					<span>{{ menu.title }}</span>
					<ul>
						<li class="text-sm font-bold">
							<a href="{{ menu.url }}" class="text-gray-500 block py-2">{{ trans('blocks.home.display_all') }}</a>
						</li>
						{% for submenu in menu.children %}
							<li class="text-sm">
								<a href="{{ submenu.url }}" class="text-gray-500 block py-2">{{ submenu.title }}</a>
							</li>
						{% endfor %}
					</ul>
				{% endif %}
			</li>
		{% endfor %}
	</ul>
	<button class="btn--close close-mobile-menu sicon-cancel lg:hidden" aria-label="{{ trans('common.close') }}"></button>
</nav>
<button class="btn--close-sm close-mobile-menu sicon-cancel hidden" aria-label="{{ trans('common.close') }}"></button>

<salla-localization-modal></salla-localization-modal>
{% if store.scope %}
	<salla-scopes></salla-scopes>
{% endif %}