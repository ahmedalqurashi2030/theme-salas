<header class="store-header th-header">

    {# 1. الشريط العلوي #}
    <div class="th-topbar hidden md:block">
        <div class="container flex justify-between items-center">
            <div class="flex items-center gap-4">
                {% component 'footer.menu' with {is_header:true} %}
                
                {% if store.settings.is_multilingual or store.settings.currencies_enabled %}
                    <button type="button" onclick="salla.event.dispatch('localization::open')" class="th-topbtn text-xs">
                        <span class="flag iti__flag iti__{{ user.language.country_code }}"></span>
                        <span>{{ currency.symbol }}</span>
                    </button>
                {% endif %}
            </div>
            <div class="text-xs opacity-90 font-medium">
                <i class="sicon-shipping-fast mx-1"></i> {{ trans('blocks.header.free_shipping') }} +299 ر.س
            </div>
        </div>
    </div>

    {# 2. الهيدر الرئيسي #}
    <div class="th-main-header py-3">
        <div class="container flex items-center justify-between gap-8">
            
            {# زر الموبايل #}
            <button class="lg:hidden text-2xl text-gray-800" onclick="toggleDrawer()">
                <i class="sicon-menu"></i>
            </button>

            {# الشعار #}
            <a href="{{ store.url }}" class="shrink-0">
                <img src="{{ store.logo }}" alt="{{ store.name }}" class="h-10 md:h-12 w-auto object-contain">
            </a>

            {# البحث #}
            <div class="flex-1 max-w-2xl hidden lg:block">
                <salla-search inline oval placeholder="{{ trans('blocks.header.search_placeholder') }}"></salla-search>
            </div>

            {# الأيقونات #}
            <div class="flex items-center gap-6">
                <button class="lg:hidden text-xl" onclick="salla.event.dispatch('search::open')"><i class="sicon-search"></i></button>

                <div class="hidden lg:block">
                    <salla-user-menu avatar-only show-header></salla-user-menu>
                </div>
                <button class="lg:hidden text-xl" onclick="salla.event.dispatch('login::open')"><i class="sicon-user"></i></button>

                <a href="{{ link('wishlist') }}" class="th-icon-btn hidden lg:flex">
                    <i class="sicon-heart"></i>
                    <span class="th-icon-label">{{ trans('blocks.header.wishlist') }}</span>
                </a>

                <salla-cart-summary class="th-icon-btn">
                    <div slot="icon" class="relative">
                        <i class="sicon-shopping-bag"></i>
                        <i class="sicon-shopping-cart"></i>
                        {# العدد #}
                        {%- if cart.items_count > 0 -%}
                        <span class="th-badge">{{ cart.items_count }}</span>
                        {%- endif -%}
                    </div>
                    <span class="th-icon-label hidden lg:block">{{ trans('blocks.header.cart') }}</span>
                </salla-cart-summary>
            </div>
        </div>
    </div>

    {# 3. الناف بار #}
    <div class="th-navbar hidden lg:block">
        <div class="container h-full">
            {% component 'header.menu' %}
        </div>
    </div>

</header>

{# استدعاء المودالز #}
<salla-localization-modal></salla-localization-modal>
{% if store.scope %} <salla-scopes></salla-scopes> {% endif %}
