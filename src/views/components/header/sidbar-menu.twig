{# القائمة الجانبية - Overlay الخلفية #}
<div class="th-sidebar-overlay" onclick="tharaa.toggleSidebar()"></div>

{# القائمة الجانبية - الجسم #}
<aside class="th-sidebar" id="th-mobile-menu">
    
    {# 1. رأس القائمة (الهيدر) #}
    <div class="th-sidebar__header">
        <div class="th-user-info">
            <img src="{{ user.avatar|default('images/user-avatar.png') }}" alt="User" class="th-avatar">
            <div>
                <span class="th-greeting">أهلاً بك</span>
                <h3 class="th-username">{{ user.name|default('زائرنا الكريم') }}</h3>
            </div>
        </div>
        <button class="th-btn-close" onclick="tharaa.toggleSidebar()">
            <i class="sicon-cancel"></i>
        </button>
    </div>

    {# 2. روابط القائمة (مع الأيقونات) #}
    <div class="th-sidebar__content">
        <ul class="th-menu-list">
            
            {# الرابط الرئيسي #}
            <li>
                <a href="{{ link('/') }}" class="th-menu-link">
                    <i class="sicon-home"></i> <span>الرئيسية</span>
                </a>
            </li>

            {# روابط سلة الديناميكية (التي يضيفها التاجر) #}
            {# هنا الخدعة: نضع أيقونة افتراضية، أو نعتمد على كلاسات CSS #}
            {% for item in store.menus.main.links %}
                <li class="th-menu-item">
                    <a href="{{ item.url }}" class="th-menu-link">
                        {# إذا التاجر لم يضع أيقونة، نضع أيقونة مجلد افتراضية #}
                        <i class="{{ item.icon|default('sicon-folder') }}"></i> 
                        <span>{{ item.title }}</span>
                        {% if item.children|length > 0 %}
                           <i class="sicon-keyboard_arrow_left arrow"></i>
                        {% endif %}
                    </a>
                    
                    {# دعم القوائم الفرعية #}
                    {% if item.children|length > 0 %}
                        <ul class="th-submenu">
                            {% for sub in item.children %}
                                <li><a href="{{ sub.url }}">{{ sub.title }}</a></li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}

             {# روابط ثابتة مهمة #}
             <li>
                <a href="{{ link('/offers') }}" class="th-menu-link th-text-danger">
                    <i class="sicon-discount"></i> <span>العروض والتخفيضات</span>
                </a>
            </li>
        </ul>
    </div>

    {# 3. تذييل القائمة (اللغة والعملة) #}
    <div class="th-sidebar__footer">
        <salla-currency-picker></salla-currency-picker>
    </div>
</aside>