{# src/views/components/layout/category-sidebar.twig #}

<!-- خلفية معتمة -->
<div class="th-cat-sidebar-overlay" onclick="tharaa.toggleCategorySidebar()"></div>

<!-- القائمة الجانبية -->
<aside class="th-cat-sidebar" id="th-category-sidebar">
    
    {# رأس القائمة #}
    <div class="th-cat-sidebar__header">
        <h3 class="font-bold text-lg">{{ trans('blocks.header.categories') }} الاقسام</h3>
        <button class="th-btn-close" onclick="tharaa.toggleCategorySidebar()">
            <i class="sicon-cancel text-xl text-gray-500 hover:text-red-500"></i>
        </button>
    </div>

    {# جسم القائمة #}
    <div class="th-cat-sidebar__body">
       <ul class="th-category-list">
    
    {# 1. التأكد أن القائمة ليست فارغة #}
    {% for menu in menus %}
                <li>
                    <a href="{{ menu.url }}" class="block p-2 hover:bg-gray-100 {{ menu.link_attrs }}">
                        {{ menu.title }}
                    </a>
                    
                    {# إذا كانت القائمة تحتوي على عناصر فرعية #}
                    {% if menu.has_children %}
                        <ul class="mr-4 mt-1 space-y-1">
                            {% for child in menu.children %}
                                <li><a href="{{ child.url }}">{{ child.title }}</a></li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>

</ul>
    </div>
</aside>

<script>
    console.log({{ store.menus.main.links | json_encode | raw }});
</script>