{# src/views/pages/partials/product/card.twig
   قالب البطاقة (server-side fallback). استخدم هذا إن لم تُستخدم web component في صفحة معيّنة.
#}
<div id="product-{{ product.id }}" class="thraa-product-card s-product-card" role="group" aria-label="{{ product.name }}">
    <div class="s-product-card-image">
      {% if product.promotion_title %}
        <div class="s-product-badge-timer">{{ product.promotion_title }}</div>
      {% endif %}
  
      <div class="s-product-card-wishlist" role="button" aria-pressed="false" title="أضف للمفضلة" tabindex="0">
        <i class="sicon-heart"></i>
      </div>
  
      <a href="{{ product.url }}" class="s-product-card-link">
        {% if product.image is defined %}
          <img src="{{ product.image.url }}" alt="{{ product.image.alt ?? product.name }}" loading="lazy">
        {% else %}
          <img src="{{ store.settings.placeholder ?? '' }}" alt="{{ product.name }}" loading="lazy">
        {% endif %}
      </a>
  
      <div class="s-product-card-add" title="أضف إلى السلة">
        <salla-add-product-button product-id="{{ product.id }}"></salla-add-product-button>
      </div>
    </div>
  
    <div class="s-product-card-content">
      <div class="s-product-card-title">{{ product.name }}</div>
  
      <div class="s-product-card-meta">
        {% if product.rating %}
          <span class="rating" aria-hidden="true"><i class="sicon-star2"></i> {{ product.rating.stars }}</span>
        {% endif %}
        <span class="comments-count" aria-hidden="true">({{ product.reviews_count | default(0) }})</span>
      </div>
  
      <div class="s-product-card-bottom">
        {% if product.discount_percent %}
          <div class="s-product-card-discount">-{{ product.discount_percent }}%</div>
        {% endif %}
        <div class="s-product-card-price">{{ product.price.formatted }}</div>
      </div>
    </div>
  </div>