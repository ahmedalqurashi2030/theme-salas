// =====================================================
// Component: Brand Carousel
// Standards: BEM, GPU Acceleration, RTL Support
// =====================================================

.s-brand-carousel {
    // CSS Variables for easy maintenance and overrides
    --sb-gap: 30px;                // المسافة بين الشعارات
    --sb-duration: 40s;            // سرعة الحركة
    --sb-item-w: 160px;            // عرض الشعار
    --sb-item-h: 90px;             // ارتفاع الشعار
    --sb-bg: #ffffff;              // لون خلفية الكرت
    --sb-border: #f8f8f8;          // لون الحدود
    --sb-ease: linear;             // نوع الحركة

    padding: 40px 0;
    overflow: hidden;
    position: relative;
    width: 100%;

    // --- Modifiers (Based on JSON Fields) ---
    
    // 1. Larger Size
    &.is-large {
        --sb-item-w: 200px;
        --sb-item-h: 120px;
        --sb-gap: 40px;

        @media (max-width: 768px) {
            --sb-item-w: 150px;
            --sb-item-h: 90px;
        }
    }

    // 2. Header Styles
    &__header {
        text-align: center;
        margin-bottom: 30px;
    }

    &__title {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--color-text-main); // Use Theme Variable
        margin: 0;
    }

    // --- Wrapper & Track ---
    
    &__wrapper {
        display: flex;
        flex-direction: column;
        gap: 20px;
        position: relative;

        // Gradient Masks for smooth fade effect (Left/Right)
        &::before,
        &::after {
            content: "";
            position: absolute;
            top: 0;
            bottom: 0;
            width: 80px;
            z-index: 2;
            pointer-events: none;
        }

        &::before {
            left: 0;
            background: linear-gradient(to right, var(--color-main-bg, #fff), transparent);
        }

        &::after {
            right: 0;
            background: linear-gradient(to left, var(--color-main-bg, #fff), transparent);
        }
    }

    &__row {
        width: 100%;
        overflow: hidden;
        
        // Pause animation on hover for user interaction
        &:hover .s-brand-carousel__track {
            animation-play-state: paused;
        }
    }

    &__track {
        display: flex;
        width: max-content;
        gap: var(--sb-gap);
        padding-inline-end: var(--sb-gap); // Ensure logic spacing
        will-change: transform; // Hint for browser optimization
        
        // Force Hardware Acceleration
        transform: translate3d(0, 0, 0); 
    }

    // --- Items ---

    &__item {
        width: var(--sb-item-w);
        height: var(--sb-item-h);
        flex-shrink: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--sb-bg);
        border: 1px solid var(--sb-border);
        border-radius: 8px;
        padding: 15px;
        transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s ease;
        
        &:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-color: rgba(0,0,0,0.1);
            
            .s-brand-carousel__img {
                filter: grayscale(0);
                opacity: 1;
            }
        }
    }

    &__link {
        display: flex;
        width: 100%;
        height: 100%;
        align-items: center;
        justify-content: center;
    }

    &__img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        // Grayscale by default, color on hover (Best Practice for Brands)
        filter: grayscale(100%);
        opacity: 0.7;
        transition: all 0.3s ease;
        user-select: none;
    }
}

// =====================================================
// Animations Logic (RTL/LTR Compatible)
// =====================================================

// Default LTR Keyframes
@keyframes marquee-left {
    0% { transform: translate3d(0, 0, 0); }
    100% { transform: translate3d(calc(-50% - (var(--sb-gap) / 2)), 0, 0); }
}

@keyframes marquee-right {
    0% { transform: translate3d(calc(-50% - (var(--sb-gap) / 2)), 0, 0); }
    100% { transform: translate3d(0, 0, 0); }
}

// Logic Assignment
.dir-normal .s-brand-carousel__track {
    animation: marquee-left var(--sb-duration) var(--sb-ease) infinite;
}

.dir-reverse .s-brand-carousel__track {
    animation: marquee-right var(--sb-duration) var(--sb-ease) infinite;
}

// --- RTL Support (Strict Salla Standard) ---
[dir="rtl"] {
    // Reverse Keyframes for Arabic
    @keyframes marquee-left-rtl {
        0% { transform: translate3d(0, 0, 0); }
        100% { transform: translate3d(50%, 0, 0); } // Move Positive
    }

    @keyframes marquee-right-rtl {
        0% { transform: translate3d(50%, 0, 0); }
        100% { transform: translate3d(0, 0, 0); }
    }

    // Re-assign animations for RTL
    .dir-normal .s-brand-carousel__track {
        animation: marquee-left-rtl var(--sb-duration) var(--sb-ease) infinite;
    }

    .dir-reverse .s-brand-carousel__track {
        animation: marquee-right-rtl var(--sb-duration) var(--sb-ease) infinite;
    }
}