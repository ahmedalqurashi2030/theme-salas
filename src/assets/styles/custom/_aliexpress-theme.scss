// AliExpress Theme Customization
// Scoped strictly under specific classes to prevent global conflicts

// AliExpress Palette
$ali-red: #ff4747;
$ali-black: #191919;
$ali-gray-bg: #f2f2f2;
$ali-gray-border: #e8e8e8;
$ali-text-dark: #222222;
$ali-text-light: #757575;
$ali-radius: 8px;
$ali-pill: 100px;
$ali-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);

/* =========================================
   1. Header Styling (.sx-aliexpress-header)
========================================= */
.sx-aliexpress-header {
    background-color: #fff;
    border-bottom: 2px solid $ali-red; // Distinctive red bottom border for main header
    font-family: system-ui, -apple-system, sans-serif;

    // --- Top Navigation Bar ---
    .top-navbar {
        background-color: #f5f5f5;
        border-bottom: 1px solid #e8e8e8;
        color: $ali-text-light;
        font-size: 11px;
        padding: 4px 0;

        a,
        button {
            color: $ali-text-light;
            transition: color 0.2s;

            &:hover {
                color: $ali-red;
            }
        }
    }

    // --- Main Header Container ---
    // The area containing Logo, Search, and Icons
    .main-nav-container {
        padding: 15px 0 20px;
        box-shadow: none !important; // Remove default shadow
    }

    // --- Logo ---
    .navbar-brand img {
        transition: transform 0.2s;

        &:hover {
            transform: scale(1.02);
        }
    }

    // --- Search Bar (The Star of the Show) ---
    .header-search {
        // AliExpress Style: Prominent, Pill-shaped or Rounded Rect, Bordered
        border: 2px solid $ali-red;
        border-radius: $ali-pill;
        background: #fff;
        overflow: hidden;
        margin: 0 30px; // Spacing from logo and icons
        max-width: 650px;
        flex: 1;
        display: flex;
        align-items: center;
        transition: box-shadow 0.2s;

        &:focus-within {
            box-shadow: 0 0 0 4px rgba(255, 71, 71, 0.15);
        }

        // Hacking Salla's Search component internals via deep styling or standard CSS
        // Assuming salla-search renders standard inputs/buttons in shadow DOM or light DOM
        salla-search {
            width: 100%;
            --color-primary: #{$ali-red}; // Tell web component to use our red

            &::part(input) {
                border: none;
                padding: 0 20px;
                color: $ali-text-dark;
                font-size: 14px;
            }

            &::part(button) {
                background-color: $ali-red;
                color: #fff;
                width: 50px; // Compact search button
                border-radius: 0; // It's inside our pill wrapper
                transition: background 0.3s;

                &:hover {
                    background-color: darken($ali-red, 5%);
                }
            }
        }
    }

    // --- Header Action Buttons (Profile, Cart) ---
    .header-buttons,
    .flex.items-center.justify-end {
        gap: 20px;
    }

    .header-btn,
    salla-cart-summary {
        color: $ali-text-dark;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 11px; // Text label size

        // Icon
        .header-btn__icon,
        .icon {
            font-size: 24px !important;
            margin-bottom: 2px;
            color: $ali-text-dark;
        }

        &:hover {
            color: $ali-red;

            .header-btn__icon,
            .icon {
                color: $ali-red;
                animation: bounce-slight 0.3s ease;
            }
        }
    }
}

// Helper Animation
@keyframes bounce-slight {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-3px);
    }
}


/* =========================================
   2. Sidebar / Mobile Menu (.sx-aliexpress-sidebar)
========================================= */
.sx-aliexpress-sidebar {
    background-color: #fff;
    box-shadow: 2px 0 12px rgba(0, 0, 0, 0.1);

    // Header Part of Sidebar
    .mobile-menu__header {
        // If exists, otherwise generic top area
        background: $ali-red;
        color: white;
    }

    .close-mobile-menu {
        top: 10px;
        right: 15px; // RTL flip handled by direction
        color: #999;

        &:hover {
            color: $ali-red;
        }
    }

    // Menu List
    .main-menu {
        padding: 10px 0;

        li {
            border-bottom: 1px solid #f2f2f2;

            a {
                padding: 14px 20px;
                color: $ali-text-dark;
                font-weight: 500;
                display: flex;
                align-items: center;
                justify-content: space-between;

                &:hover {
                    background-color: #fff8f8; // Very light red tint
                    color: $ali-red;
                    padding-inline-start: 25px; // Slide effect
                }
            }
        }
    }
}

/* =========================================
   3. Mobile Responsive Tweaks
========================================= */
@media (max-width: 768px) {
    .sx-aliexpress-header {
        .header-search {
            margin: 10px 0 0 0;
            order: 3; // Move search to bottom on mobile if flex container
            width: 100%;
            border-radius: 8px; // Less rounded on small screens to save space
            border-width: 1px;
        }

        .main-nav-container .container>div {
            flex-wrap: wrap; // Allow wrapping for search bar
        }
    }
}