/**
 * Cart Page Enhancements
 * تحسينات صفحة السلة
 */

// تحسينات صفحة السلة
.cart-page {
  // تحسين عناصر السلة
  .cart-item {
    transition: all 0.3s ease;
    animation: slideInRight 0.4s ease-out;
    
    @keyframes slideInRight {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    // تأثير عند الحذف
    &.removing {
      animation: slideOutLeft 0.3s ease-out forwards;
      
      @keyframes slideOutLeft {
        to {
          opacity: 0;
          transform: translateX(-100%);
          max-height: 0;
          margin: 0;
          padding: 0;
        }
      }
    }
    
    // تحسين الصورة
    img {
      transition: transform 0.3s ease;
      
      &:hover {
        transform: scale(1.1);
      }
    }
    
    // تحسين زر الحذف
    .btn--delete {
      transition: all 0.2s ease;
      
      &:hover {
        transform: scale(1.1);
        background-color: #ef4444;
      }
    }
    
    // تحسين الكمية
    salla-quantity-input {
      .s-quantity-input-container {
        transition: all 0.2s ease;
        
        &:hover {
          border-color: var(--color-primary);
        }
      }
    }
  }

  // تحسين ملخص السلة
  .cart-summary {
    position: sticky;
    top: 100px;
    transition: all 0.3s ease;
    
    // تحسين الأزرار
    button {
      transition: all 0.3s ease;
      
      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      
      &:active {
        transform: translateY(0);
      }
    }
  }

  // تحسين شريط الشحن المجاني
  .free-shipping-bar {
    .progress-bar {
      transition: width 0.5s ease;
      animation: progressPulse 2s ease-in-out infinite;
    }
    
    @keyframes progressPulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.8;
      }
    }
  }

  // تحسين السلة الفارغة
  .no-content-placeholder {
    animation: fadeIn 0.5s ease-out;
    
    .icon {
      animation: bounceSubtle 1s ease-in-out infinite;
    }
  }

  // تحسين الكوبونات
  .coupon-section {
    transition: all 0.3s ease;
    
    &.applied {
      background-color: rgba(34, 197, 94, 0.1);
      border-color: #22c55e;
      animation: successPulse 0.5s ease-out;
    }
    
    @keyframes successPulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.02);
      }
      100% {
        transform: scale(1);
      }
    }
  }

  // تحسينات على الجوال
  @media (max-width: 768px) {
    .cart-item {
      padding: 1rem;
      
      .cart-item-image {
        width: 80px;
        height: 80px;
      }
    }
    
    .cart-summary {
      position: relative;
      top: 0;
      margin-top: 2rem;
    }
  }
}

// تحسينات أيقونة السلة في الهيدر
.s-cart-summary {
  transition: all 0.3s ease;
  
  &:hover {
    transform: scale(1.1);
  }
  
  // تأثير عند إضافة منتج
  &.item-added {
    animation: cartBounce 0.5s ease-out;
  }
  
  @keyframes cartBounce {
    0%, 100% {
      transform: scale(1);
    }
    25% {
      transform: scale(1.2) rotate(-5deg);
    }
    50% {
      transform: scale(1.2) rotate(5deg);
    }
    75% {
      transform: scale(1.1) rotate(-2deg);
    }
  }
  
  // تحسين العداد
  .cart-count {
    transition: all 0.3s ease;
    
    &.updated {
      animation: countPulse 0.3s ease-out;
    }
    
    @keyframes countPulse {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.3);
      }
      100% {
        transform: scale(1);
      }
    }
  }
}

// تحسينات نافذة السلة السريعة (Mini Cart)
.s-cart-drawer {
  .cart-drawer-item {
    transition: all 0.3s ease;
    
    &:hover {
      background-color: rgba(0, 0, 0, 0.02);
    }
    
    // تأثير عند الحذف
    &.removing {
      opacity: 0;
      transform: translateX(-100%);
      max-height: 0;
      margin: 0;
      padding: 0;
    }
  }
  
  // تحسين الأزرار
  .cart-drawer-actions {
    button {
      transition: all 0.3s ease;
      
      &:hover {
        transform: translateY(-2px);
      }
    }
  }
}

// تحسينات رسائل النجاح/الخطأ
.cart-message {
  animation: slideDown 0.3s ease-out;
  
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  &.success {
    background-color: rgba(34, 197, 94, 0.1);
    border-color: #22c55e;
    color: #16a34a;
  }
  
  &.error {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: #ef4444;
    color: #dc2626;
  }
}
