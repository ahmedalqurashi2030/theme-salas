(()=>{"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t){var n=function(t){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(n)?n:n+""}function o(t,i){for(var o=0;o<i.length;o++){var e=i[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,n(e.key),e)}}function e(t,i,n){return i&&o(t.prototype,i),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function r(t,i){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},r(t,i)}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function s(t){var i="function"==typeof Map?new Map:void 0;return s=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(i){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(t))return i.get(t);i.set(t,n)}function n(){return function(t,i,n){if(c())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,i);var e=new(t.bind.apply(t,o));return n&&r(e,n.prototype),e}(t,arguments,a(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r(n,t)},s(t)}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(l=function(){return!!t})()}(function(){return e((function i(){t(this,i)}),[{key:"onReady",value:function(){}},{key:"registerEvents",value:function(){}},{key:"initiate",value:function(t){if(t&&!t.includes(salla.config.get("page.slug")))return app.log("The Class For (".concat(t.join(","),") Skipped."));this.onReady(),this.registerEvents(),app.log("The Class For (".concat((null==t?void 0:t.join(","))||"*",") LoadedðŸŽ‰"))}}])}()).initiateWhenReady=function(){var t,i=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;"ready"===(null===(t=window.app)||void 0===t?void 0:t.status)?(new this).initiate(n):document.addEventListener("theme::ready",(function(){return(new i).initiate(n)}))};var u,d,p=function(n){function o(){return t(this,o),n=this,r=arguments,e=a(e=o),function(t,n){if(n&&("object"==i(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(n,l()?Reflect.construct(e,r||[],a(n).constructor):e.apply(n,r));var n,e,r}return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&r(t,i)}(o,n),e(o,[{key:"connectedCallback",value:function(){var t,i=this;this.product=this.product||JSON.parse(this.getAttribute("product")),"ready"===(null===(t=window.app)||void 0===t?void 0:t.status)?this.onReady():document.addEventListener("theme::ready",(function(){return i.onReady()}),{once:!0})}},{key:"onReady",value:function(){var t=this;o.injectOnceStyles(),this.fitImageHeight=salla.config.get("store.settings.product.fit_type"),this.placeholder=salla.url.asset(salla.config.get("theme.settings.placeholder")),this.getProps(),this.source=salla.config.get("page.slug"),"landing-page"==this.source&&(this.hideAddBtn=!0,this.showQuantity=window.showQuantity),salla.lang.onLoaded((function(){t.remained=salla.lang.get("pages.products.remained"),t.donationAmount=salla.lang.get("pages.products.donation_amount"),t.startingPrice=salla.lang.get("pages.products.starting_price"),t.outOfStock=salla.lang.get("pages.products.out_of_stock"),t.render()})),this.render()}},{key:"formatDate",value:function(t){var i=new Date(t);return"".concat(i.getFullYear(),"-").concat(i.getMonth()+1,"-").concat(i.getDate())}},{key:"getProps",value:function(){this.horizontal=this.hasAttribute("horizontal"),this.shadowOnHover=this.hasAttribute("shadowOnHover"),this.hideAddBtn=this.hasAttribute("hideAddBtn"),this.fullImage=this.hasAttribute("fullImage"),this.minimal=this.hasAttribute("minimal"),this.isSpecial=this.hasAttribute("isSpecial"),this.showQuantity=this.hasAttribute("showQuantity")}},{key:"escapeHTML",value:function(){return String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},{key:"getProductBadge",value:function(){var t,i,n,o;return null!==(t=this.product)&&void 0!==t&&null!==(t=t.preorder)&&void 0!==t&&t.label?'<div class="s-product-card-promotion-title">'.concat(this.escapeHTML(this.product.preorder.label),"</div>"):this.product.promotion_title?'<div class="s-product-card-promotion-title">'.concat(this.escapeHTML(this.product.promotion_title),"</div>"):this.showQuantity&&null!==(i=this.product)&&void 0!==i&&i.quantity?'<div class="s-product-card-quantity">'.concat(this.remained," ").concat(salla.helpers.number(null===(o=this.product)||void 0===o?void 0:o.quantity),"</div>"):this.showQuantity&&null!==(n=this.product)&&void 0!==n&&n.is_out_of_stock?'<div class="s-product-card-out-badge">'.concat(this.outOfStock,"</div>"):""}},{key:"getPriceFormat",value:function(t){return t&&0!=t?salla.money(t):salla.config.get("store.settings.product.show_price_as_dash")?"-":""}},{key:"getProductPrice",value:function(){var t,i,n;return this.product.is_on_sale?'<div class="s-product-card-sale-price">\n        <h4>'.concat(this.getPriceFormat(this.product.sale_price),"</h4>\n        <span>").concat(this.getPriceFormat(null===(i=this.product)||void 0===i?void 0:i.regular_price),"</span>\n      </div>"):this.product.starting_price?'<div class="s-product-card-starting-price">\n        <p>'.concat(this.startingPrice,"</p>\n        <h4>").concat(this.getPriceFormat(null===(n=this.product)||void 0===n?void 0:n.starting_price),"</h4>\n      </div>"):'<h4 class="s-product-card-price">'.concat(this.getPriceFormat(null===(t=this.product)||void 0===t?void 0:t.price),"</h4>")}},{key:"getDiscountPercent",value:function(){var t,i,n,o=Number((null===(t=this.product)||void 0===t?void 0:t.regular_price)||0),e=Number((null===(i=this.product)||void 0===i?void 0:i.sale_price)||0);return null===(n=this.product)||void 0===n||!n.is_on_sale||!o||!e||e>=o?null:Math.round(100*(1-e/o))}},{key:"getDiscountBadgeHtml",value:function(){var t=this.getDiscountPercent();return t?'<span class="th-product-card-discount-badge">-'.concat(t,"%</span>"):""}},{key:"getRatingHtml",value:function(){var t,i=!(null===(t=this.product)||void 0===t||null===(t=t.rating)||void 0===t||!t.stars),n=i?this.product.rating.stars:5,o=i?this.product.rating.count||0:2;return'\n      <div class="s-product-card-rating text-sm flex items-center gap-1">\n        <span class="text-gray-400 text-xs">('.concat(o,')</span>\n        <span class="font-bold text-gray-600">').concat(n,'</span>\n        <i class="sicon-star2 text-amber-400"></i>\n      </div>')}},{key:"render",value:function(){var t,i,n,o,e=this;["th-product-card","s-product-card-vertical","s-product-card-horizontal","s-product-card-fit-height","s-product-card-special","s-product-card-full-image","s-product-card-minimal","s-product-card-donation","s-product-card-shadow","s-product-card-out-of-stock"].forEach((function(t){return e.classList.remove(t)})),this.classList.add("s-product-card-entry"),this.setAttribute("id",this.product.id),!(this.horizontal||this.fullImage||this.minimal)&&this.classList.add("s-product-card-vertical"),this.horizontal&&!this.fullImage&&!this.minimal&&this.classList.add("s-product-card-horizontal"),this.fitImageHeight&&!this.isSpecial&&!this.fullImage&&!this.minimal&&this.classList.add("s-product-card-fit-height"),this.isSpecial&&this.classList.add("s-product-card-special"),this.fullImage&&this.classList.add("s-product-card-full-image"),this.minimal&&this.classList.add("s-product-card-minimal"),null!==(t=this.product)&&void 0!==t&&t.donation&&this.classList.add("s-product-card-donation"),this.shadowOnHover&&this.classList.add("s-product-card-shadow"),null!==(i=this.product)&&void 0!==i&&i.is_out_of_stock&&this.classList.add("s-product-card-out-of-stock"),!(this.horizontal||this.fullImage||this.minimal||this.isSpecial||null!==(n=this.product)&&void 0!==n&&n.donation)&&this.classList.add("th-product-card"),this.renderClassic(),null===(o=document.lazyLoadInstance)||void 0===o||o.update(this.querySelectorAll(".lazy"))}},{key:"renderClassic",value:function(){var t,i,n,o,e,a,r,c,s,l,u,d,p;this.isInWishlist=!salla.config.isGuest()&&salla.storage.get("salla::wishlist",[]).includes(Number(this.product.id));var h=null!==(t=this.product)&&void 0!==t&&null!==(t=t.brand)&&void 0!==t&&t.name?this.escapeHTML(this.product.brand.name):"",f=null!==(i=this.product)&&void 0!==i&&i.is_on_sale?this.getDiscountBadgeHtml():"",v=null!==(n=this.product)&&void 0!==n&&null!==(n=n.options)&&void 0!==n&&n.length?'<salla-product-options\n           class="th-hidden-options"\n           options="'.concat(this.escapeHTML(JSON.stringify(this.product.options)),'"\n           product-id="').concat(this.product.id,'"\n           product-status="').concat(this.product.status,'"\n           product-type="').concat(this.product.type,'">\n         </salla-product-options>'):"",g=this.hideAddBtn||this.horizontal||this.fullImage?"":'<div class="s-product-card-add-btn">\n            <salla-add-product-button\n              fill="outline"\n              product-id="'.concat(this.product.id,'"\n              product-status="').concat(this.product.status,'"\n              product-type="').concat(this.product.type,'"\n              class="btn-floating-cart">\n              <i class="sicon-shopping-bag"></i>\n            </salla-add-product-button>\n          </div>');this.innerHTML='\n      <div class="'.concat(this.fullImage?"s-product-card-image-full":"s-product-card-image",'">\n        <a href="').concat(null===(o=this.product)||void 0===o?void 0:o.url,'" aria-label="').concat(this.escapeHTML((null===(e=this.product)||void 0===e||null===(e=e.image)||void 0===e?void 0:e.alt)||this.product.name),'">\n          <img\n            class="s-product-card-image-').concat(salla.url.is_placeholder(null===(a=this.product)||void 0===a||null===(a=a.image)||void 0===a?void 0:a.url)?"contain":this.fitImageHeight?this.fitImageHeight:"cover",' lazy"\n            src="').concat(this.placeholder,'"\n            alt="').concat(this.escapeHTML((null===(r=this.product)||void 0===r||null===(r=r.image)||void 0===r?void 0:r.alt)||this.product.name),'"\n            data-src="').concat((null===(c=this.product)||void 0===c||null===(c=c.image)||void 0===c?void 0:c.url)||(null===(s=this.product)||void 0===s?void 0:s.thumbnail)||"",'"\n          />\n        </a>\n\n        ').concat(this.horizontal||this.fullImage?"":'<salla-button\n              shape="icon"\n              fill="outline"\n              color="light"\n              name="product-name-'.concat(this.product.id,'"\n              aria-label="Add or remove to wishlist"\n              class="s-product-card-wishlist-btn animated ').concat(this.isInWishlist?"s-product-card-wishlist-added pulse-anime":"not-added un-favorited",'"\n              onclick="salla.wishlist.toggle(').concat(this.product.id,')"\n              data-id="').concat(this.product.id,'">\n              <i class="sicon-heart"></i>\n            </salla-button>'),"\n\n        ").concat(this.fullImage||this.minimal?"":this.getProductBadge(),"\n\n        ").concat(this.fullImage?'<a href="'.concat(null===(l=this.product)||void 0===l?void 0:l.url,'" aria-label="').concat(this.escapeHTML(this.product.name),'" class="s-product-card-overlay"></a>'):"",'\n      </div>\n\n      <div class="s-product-card-content">\n        \x3c!-- Row 1: Rating + Add to Cart Button --\x3e\n        <div class="s-product-card-meta">\n          ').concat(this.getRatingHtml(),"\n          ").concat(g,"\n        </div>\n\n        ").concat(h?'<span class="s-product-card-brand">'.concat(h,"</span>"):"",'\n\n        <h3 class="s-product-card-content-title">\n          <a href="').concat(null===(u=this.product)||void 0===u?void 0:u.url,'">').concat(this.escapeHTML(null===(d=this.product)||void 0===d?void 0:d.name),'</a>\n        </h3>\n\n        <div class="s-product-card-price-row">\n          ').concat(f,"\n          ").concat(null!==(p=this.product)&&void 0!==p&&null!==(p=p.donation)&&void 0!==p&&p.can_donate?"":this.getProductPrice(),"\n        </div>\n\n        ").concat(v,"\n      </div>\n    ")}}],[{key:"injectOnceStyles",value:function(){}}])}(s(HTMLElement));u=p,(d=n(d="STYLE_VERSION"))in u?Object.defineProperty(u,d,{value:"v4",enumerable:!0,configurable:!0,writable:!0}):u[d]="v4",customElements.get("custom-salla-product-card")||customElements.define("custom-salla-product-card",p)})();